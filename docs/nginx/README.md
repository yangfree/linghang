---
title: nginx
sidebar: auto
---

## 1. 基本概念

`Nginx` 可用作为静态页面的服务器，同时还支持CGI协议的动态语言，比如 `prel` , `php` 等。但是不支持 `java` ， `java` 程序只能通过与 `tomcat` 配合完成。 

### 1.1 nginx是什么？

`Nginx` 是一个高性能的 `http` 和反向代理服务器，特点是占用内存少，并发能力强，事实上 `nginx` 的并发能力确实在同类型的网页服务器中表现较好。

`Nginx` 专为性能优化而开发，性能是重要的考量，实现上非常注重效率，能经起高负载等考验。

### 1.2 反向代理

正向代理: 如果把局域网外的 `internet` 想象成一个巨大的资源库，则局域网中的客户端要访问 `internet` ，则需要通过代理服务器来访问，这种代理服务就是正向代理。

反向代理: 客户端发起的请求到反向代理服务器，反向代理服务器根据客户端的请求访问转发到真实服务器去获取数据，然后在反给客户端。此时对于客户端来说，反向代理服务器和真实目标服务器是一个服务器，因为暴露的是反向代理的服务器，真实服务器的ip得以隐藏。

### 1.3 负载均衡

客户端发送多个请求到服务端，服务端处理请求，有一些可能要与数据库进行交互，服务器处理完毕后，在将结果返回给客户端。

这种架构模式对与早期的系统相对单一，并发请求较少的情况下是比较适合的，成本也低。但是随着客户量的不断增长，访问量和数据量不断在增加，系统业务的复杂度也在不断提升，这种架构的缺点就暴露出来了，首先会响应会越来越慢，在并发量大的时候服务器可能会崩溃，无论我们如何升级服务器的配置，总有一个瓶颈。

纵向解决不了，我们可以横向去思考，单个服务器解决不了，我们可以增加服务器的数量，然后通过反向代理服务器将请求分发到各个服务器上，将原先集中请求到单个服务器上的情况分发到多个服务器上，将负载分发到不同的服务器，这就是我们说的负载均衡。

### 1.4 动静分离

为了加快网站的解析速度，可以把动态页面和静态页面有不同的服务器来解析，加快解析速度，降低原来单个服务器的压力。

## 2.nginx安装，常用命令和配置文件

### 2.1 在linux系统中安装nginx

### 2.2 nginx常用命令

``` bash
# 查看版本号
nginx -v
# 启动
nginx
# 停止
nginx -s stop
# 重加载
nginx -s reload
```

### 2.3 nginx配置文件

``` bash
# - 全局块: 从配置文件到events块之间到内容，主要设置一些影响nginx服务器整体运行到配置命令。
worker_processes: 1;

# events块: 主要影响nginx服务器与用户到网络链接
worker_connections 1024;

# http块: 包含http全局块和server局域块
http {
    server {

    }
}
```

## 3.nginx配置实例

### 3.1 反向代理



### 3.2 负载均衡

### 3.3 动静分离

## 4.nginx配置高可用集群

## 5.nginx原理

